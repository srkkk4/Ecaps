## SJ 定理

#### - SJ 定理

对于一种游戏 $S$, 我们规定 **必胜态** : **所有子游戏的 $\text{sg}_i (i \in S)$ 为 $0$** ( 不一定是其它某个值取到 $0$, 但一定是 sg 取到 $0$ )

我们有结论 : 当下面两点 **同时满足或不满足时, 先手必胜** : 

1. $\bigoplus_{i \in S} sg_i = 0$ ( 性质 A )

2. $\max_{i \in S} sg_i \leqslant 1$ ( 性质 B )

#### - SJ 定理的证明

考虑归纳证明, 对于边界显然满足

**当前为必胜态** : 

* 同时满足 A, B : 我们只要证明此状态下存在一个后继为必败态即可, 显然我们不存在一种方法使得 B2 不满足, 我们只用考虑如何使 A 不满足, 显然如果没有到边界情况, 我们任意取即可, 因为 $0$ 异或不为 $0$ 的数不为 $0$

* 同时不满足 A, B : 按照普通 Nim 游戏的证明, 我们存在一种方法使得 A 不满足, 我们只需要证在这种方法下 B 依然满足

  如果存在一种情况使得 B 不满足, 那么意味着原来仅存在一处 sg 大于 $1$, 显然, 我们可以通过控制这个 sg 使其变为 $0$ 或 $1$, 来完成对奇偶的控制, 进而决定胜败
  
**当前为必败态** : 

* 满足 A, 不满足 B : 我们只用证明此状态下所有的后继均为必胜态, 首先可以确定的是操作后 A 必然不被满足, 我们只要证明依然不满足 B 即可

  如果存在一种情况使得 B 被满足, 那么以为着仅存在一处 sg 大于 $1$, 而在这种情况下, 原来无论如何都不会满足 A 性质, 因为此时 sg 必然存在一位非最低位的 $1$, 而这个 $1$ 不存在另一个数将其抵消
  
* 不满足 A, 满足 B : 这种情况意味着有奇数个 $1$, 显然只存在一种操作方案, 最后导出后手必胜

<br>

#### - 参考

* [cnblogs](https://www.cnblogs.com/y-clever/p/6667592.html)
